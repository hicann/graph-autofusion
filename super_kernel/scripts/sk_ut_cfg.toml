# Copyright (c) 2025 Huawei Technologies Co., Ltd.
# This program is free software, you can redistribute it and/or modify it under the terms and contiditions of
# CANN Open Software License Agreement Version 2.0 (the "License").
# Please refer to the License for details. You may not use this file except in compliance with the License.
# THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED,
# INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE.
# See LICENSE in the root of the software repository for the full text of the License.
# ======================================================================================================================


[tool.pytest.ini_options]
markers = [
  "st: system tests exercising end-to-end flows",
  "ut: unit tests covering superkernel module behavior"
]
testpaths = [
  "tests/ut"
]

[tool.coverage.run]
source = ["src/superkernel"]
omit = [
  "*/tests/*",
  "*/__pycache__/*",
  "*/build/*",
  "*/dist/*",
  "*/venv/*",
]
data_file = "coverage/ut/.coverage"

[tool.coverage.report]
exclude_lines = [
  "pragma: no cover",
  "def __repr__",
  "raise AssertionError",
  "raise NotImplementedError",
  "if __name__ == .__main__.:",
]
show_missing = true
# fail_under = 80

[tool.coverage.html]
directory = "coverage/ut/html"

[tool.coverage.xml]
output = "coverage/ut/coverage.xml"
